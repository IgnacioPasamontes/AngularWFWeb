<div class="card">
    <h5 class="card-header bg-light p-1">Name2CAS resolution</h5>

    <div class="row m-5 form-group" style="margin-bottom:0px !important">
        <table style="width:100%;vertical-align:bottom">
            <tr>

                    <td style="width:9rem"><label style="margin-bottom:0px" for="name2cas_compound_name" >Compound name:</label></td>
                    <td><input id="name2cas_compound_name" class="form-control" name="compound_name" [(ngModel)]="compound_name" type="text"></td>
                    <td style="width:12rem"><button class="btn btn-primary" [disabled]="cas_from_name_running" (click)="CASFromNameButton()">Search</button>
                        <mat-spinner *ngIf="cas_from_name_running" style="display:inline-block" ProgressSpinnerMode="indeterminate" diameter="14"></mat-spinner>
                    <td></td>

            </tr>
            <tr>
                <td></td>
                <td><br>
                    <div class="form-check">
                        <input class="form-check-input" id="show-name2cas-data" type="checkbox" (change)="changeCASShowCactvsData()" [(ngModel)]="cas_show_cactvs_data">
                        <label class="form-check-label" for="show-name2cas-data">Show CACTVS data</label>
                </div><br></td>
                <td></td>
                <td></td>
                
            </tr>
            <tr>

                    <td style="width:9rem"><label style="margin-bottom:0px" for="name2cas_cas" >CAS registry number(s):</label></td>
                    <td style="width:auto">
                            <select id="name2cas_cas" size=5 class="form-control" name="selected_cas" [(ngModel)]="selected_cas_int_id_list" multiple>
                            <ng-container *ngIf="cas_show_cactvs_data"><option *ngFor="let cas of cas_list" [ngValue]="cas.int_id" [innerHTML]="cas.html_rep"></option></ng-container>
                            <ng-container *ngIf="!cas_show_cactvs_data"><option *ngFor="let cas of cas_set" [ngValue]="cas.int_id" [innerHTML]="cas.rgn"></option></ng-container>
                            </select>
                            
                    </td>
                    <td style="width:12rem"><button class="btn" [disabled]="cas_list.length === 0 || !cas_show_cactvs_data" (click)="CASFromNameRemoveDuplicatesButton()">Remove duplicates</button><br>
                        <button class="btn" [disabled]="selected_cas_int_id_list.length === 0" (click)="CASFromNameDeleteButton()">Delete</button>
                        <button class="btn" [disabled]="selected_cas_int_id_list.length === 0" (click)="openCopy(content,true)">Copy in clipboard</button>
                        <button class="btn" [disabled]="cas_list.length === 0" (click)="openCopy(content,false)">Copy all in clipboard</button>
                    </td>
                    <td></td>

            </tr>
        </table>
    </div>
    <br>
    <div class="row m-5" style="margin-top:0px !important">
        <div *ngIf="cas_from_name_executed">
        <!--TODO: sentences about how many cas numbers have been found-->
        <label *ngIf="cas_list.length !== 0 && selected_cas_int_id_list.length === 0 && !cas_from_name_running" >
            <ng-container *ngIf="cas_show_cactvs_data">{{cas_list.length}}</ng-container>
            <ng-container *ngIf="!cas_show_cactvs_data">{{cas_set.length}}</ng-container> CAS registry number
            <ng-container *ngIf="cas_list.length > 1">s</ng-container> found.
        </label>
        <label *ngIf="selected_cas_int_id_list.length === 1 && cas_show_cactvs_data" [innerHTML]="this.cas_current.html_rep"></label>
        <label *ngIf="selected_cas_int_id_list.length > 1 || selected_cas_int_id_list.length === 1 && !cas_show_cactvs_data" >Selected {{selected_cas_int_id_list.length}} CAS registry number<ng-container *ngIf="cas_list.length > 1">s</ng-container>.</label>
        </div>
    </div>
</div>
<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="name2cas-copy-cliboard-basic-title">CAS registry number(s)</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('close')">
        <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="form-group">
            <div class="input-group">
                <div class="form-check">
                    <input class="form-check-input" id="show-name2cas-copy-data" type="checkbox" (change)="changeShowName2CasData()" [(ngModel)]="cas_copy_show_cactvs_data">
                    <label class="form-check-label" for="show-name2cas-copy-data">Show CACTVS data</label>
                </div>  
            </div>
            <br>
            <div class="input-group">
                <p>The following CAS registry number data has been copied in your clipboard:</p>
            </div>
            <div class="input-group">
                <textarea id="name2cas-copy-textarea" style="width:100%" class="form-control" rows=10 readonly [innerHTML]="cas_text_dump"></textarea>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button type="button" class="btn btn-outline-dark" (click)="modal.dismiss('close')">Close</button>
    </div>
</ng-template>
